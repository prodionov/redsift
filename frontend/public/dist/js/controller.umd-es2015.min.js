!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=287)}([,,,function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,,function(t,e,n){(function(e){function r(){}function o(){p.log.apply(p,arguments)}function i(){p.log.apply(p,arguments)}function u(){p.warn.apply(p,arguments)}function s(t){v[t]=y()}function c(t){var e=v[t];if(!e)throw new Error("No such label: "+t);var n=y()-e;p.log(t+": "+n+"ms")}function a(){var t=new Error;t.name="Trace",t.message=d.format.apply(null,arguments),p.error(t.stack)}function f(t){p.log(d.inspect(t)+"\n")}function l(t){if(!t){var e=g.call(arguments,1);h.ok(!1,d.format.apply(null,e))}}var p,d=n(64),h=n(108),y=n(109),g=Array.prototype.slice,v={};p=void 0!==e&&e.console?e.console:"undefined"!=typeof window&&window.console?window.console:{};for(var m=[[r,"log"],[o,"info"],[i,"warn"],[u,"error"],[s,"time"],[c,"timeEnd"],[a,"trace"],[f,"dir"],[l,"assert"]],b=0;b<m.length;b++){var _=m[b],x=_[0],w=_[1];p[w]||(p[w]=x)}t.exports=p}).call(e,n(25))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(19),o=n(67),i=n(37),u=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},,function(t,e,n){var r=n(4),o=n(3),i=n(66),u=n(13),s=n(8),c=function(t,e,n){var a,f,l,p=t&c.F,d=t&c.G,h=t&c.S,y=t&c.P,g=t&c.B,v=t&c.W,m=d?o:o[e]||(o[e]={}),b=m.prototype,_=d?r:h?r[e]:(r[e]||{}).prototype;d&&(n=e);for(a in n)(f=!p&&_&&void 0!==_[a])&&s(m,a)||(l=f?_[a]:n[a],m[a]=d&&"function"!=typeof _[a]?n[a]:g&&f?i(l,r):v&&_[a]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((m.virtual||(m.virtual={}))[a]=l,t&c.R&&b&&!b[a]&&u(b,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(9),o=n(27);t.exports=n(10)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(86),o=n(34);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(36)("wks"),o=n(26),i=n(4).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},,function(t,e,n){var r=n(14);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},,,,,,function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},,function(t,e,n){var r=n(71),o=n(46);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){e.f={}.propertyIsEnumerable},,,function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(36)("keys"),o=n(26);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(4),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(14);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(114),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";e.__esModule=!0;var r=n(41),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(117),i=r(o),u=n(131),s=r(u),c="function"==typeof s.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===c(i.default)?function(t){return void 0===t?"undefined":c(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":c(t)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e,n){var r=n(19),o=n(122),i=n(46),u=n(35)("IE_PROTO"),s=function(){},c=function(){var t,e=n(68)("iframe"),r=i.length;for(e.style.display="none",n(126).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[u]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(9).f,o=n(8),i=n(16)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){e.f=n(16)},function(t,e,n){var r=n(4),o=n(3),i=n(43),u=n(48),s=n(9).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:u.f(t)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(141),i=r(o),u=n(145),s=r(u),c=n(41),a=r(c);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},,,,,,function(t,e,n){var r=n(34);t.exports=function(t){return Object(r(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},,,,,,,function(t,e,n){(function(t,r,o){function i(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),a(r,t,r.depth)}function u(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function c(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function a(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return _(o)||(o=a(t,o,r)),o}var i=f(t,n);if(i)return i;var u=Object.keys(n),s=c(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),j(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return l(n);if(0===u.length){if(E(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(k(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return l(n)}var v="",m=!1,b=["{","}"];if(y(n)&&(m=!0,b=["[","]"]),E(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(k(n)&&(v=" "+RegExp.prototype.toString.call(n)),O(n)&&(v=" "+Date.prototype.toUTCString.call(n)),j(n)&&(v=" "+l(n)),0===u.length&&(!m||0==n.length))return b[0]+v+b[1];if(r<0)return k(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=m?p(t,n,r,s,u):u.map(function(e){return d(t,n,r,s,e,m)}),t.seen.pop(),h(x,v,b)}function f(t,e){if(w(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return b(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,o){for(var i=[],u=0,s=e.length;u<s;++u)C(e,String(u))?i.push(d(t,e,n,r,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(t,e,n,r,o,!0))}),i}function d(t,e,n,r,o,i){var u,s,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),C(r,o)||(u="["+o+"]"),s||(t.seen.indexOf(c.value)<0?(s=v(n)?a(t,c.value,null):a(t,c.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(u)){if(i&&o.match(/^\d+$/))return s;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+s}function h(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function y(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function b(t){return"number"==typeof t}function _(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function w(t){return void 0===t}function k(t){return S(t)&&"[object RegExp]"===I(t)}function S(t){return"object"==typeof t&&null!==t}function O(t){return S(t)&&"[object Date]"===I(t)}function j(t){return S(t)&&("[object Error]"===I(t)||t instanceof Error)}function E(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function I(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),G[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var M=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,u=String(t).replace(M,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])v(s)||!S(s)?u+=" "+s:u+=" "+i(s);return u},e.deprecate=function(n,i){function u(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?o.trace(i):o.error(i),s=!0}return n.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return u};var L,D={};e.debuglog=function(t){if(w(L)&&(L=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(L)){var n=r.pid;D[t]=function(){var r=e.format.apply(e,arguments);o.error("%s %d: %s",t,n,r)}}else D[t]=function(){};return D[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=y,e.isBoolean=g,e.isNull=v,e.isNullOrUndefined=m,e.isNumber=b,e.isString=_,e.isSymbol=x,e.isUndefined=w,e.isRegExp=k,e.isObject=S,e.isDate=O,e.isError=j,e.isFunction=E,e.isPrimitive=T,e.isBuffer=n(106);var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){o.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=n(107),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(25),n(105),n(7))},function(t,e,n){var r=n(8),o=n(56),i=n(35)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(113);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=!n(10)&&!n(17)(function(){return 7!=Object.defineProperty(n(68)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(14),o=n(4).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){"use strict";var r=n(43),o=n(12),i=n(70),u=n(13),s=n(44),c=n(121),a=n(47),f=n(65),l=n(16)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,h,y,g,v){c(n,e,h);var m,b,_,x=function(t){if(!p&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",k="values"==y,S=!1,O=t.prototype,j=O[l]||O["@@iterator"]||y&&O[y],E=j||x(y),T=y?k?x("entries"):E:void 0,I="Array"==e?O.entries||j:j;if(I&&(_=f(I.call(new t)))!==Object.prototype&&_.next&&(a(_,w,!0),r||"function"==typeof _[l]||u(_,l,d)),k&&j&&"values"!==j.name&&(S=!0,E=function(){return j.call(this)}),r&&!v||!p&&!S&&O[l]||u(O,l,E),s[e]=E,s[w]=d,y)if(m={values:k?E:x("values"),keys:g?E:x("keys"),entries:T},v)for(b in m)b in O||i(O,b,m[b]);else o(o.P+o.F*(p||S),e,m);return m}},function(t,e,n){t.exports=n(13)},function(t,e,n){var r=n(8),o=n(15),i=n(123)(!1),u=n(35)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),c=0,a=[];for(n in s)n!=u&&r(s,n)&&a.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(a,n)||a.push(n));return a}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(71),o=n(46).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(30),o=n(27),i=n(15),u=n(37),s=n(8),c=n(67),a=Object.getOwnPropertyDescriptor;e.f=n(10)?a:function(t,e){if(t=i(t),e=u(e,!0),c)try{return a(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},,,,,,,,,,,,function(t,e,n){var r=n(72);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},,,,,,,,,,,,,,,,,,,function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){y&&d&&(y=!1,d.length?h=d.concat(h):g=-1,h.length&&s())}function s(){if(!y){var t=o(u);y=!0;for(var e=h.length;e;){for(d=h,h=[];++g<e;)d&&d[g].run();g=-1,e=h.length}d=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var f,l,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var d,h=[],y=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new c(t,e)),1!==h.length||y||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=a,p.addListener=a,p.once=a,p.off=a,p.removeListener=a,p.removeAllListeners=a,p.emit=a,p.prependListener=a,p.prependOnceListener=a,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function i(t){return Object.prototype.toString.call(t)}function u(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(_.isFunction(t)){if(k)return t.name;var e=t.toString(),n=e.match(O);return n&&n[1]}}function c(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function a(t){if(k||!_.isFunction(t))return _.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function f(t){return c(a(t.actual),128)+" "+t.operator+" "+c(a(t.expected),128)}function l(t,e,n,r,o){throw new S.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function p(t,e){t||l(t,!0,e,"==",S.ok)}function d(t,e,n,s){if(t===e)return!0;if(o(t)&&o(e))return 0===r(t,e);if(_.isDate(t)&&_.isDate(e))return t.getTime()===e.getTime();if(_.isRegExp(t)&&_.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&i(t)===i(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(t);return-1!==c&&c===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),y(t,e,n,s))}return n?t===e:t==e}function h(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function y(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(_.isPrimitive(t)||_.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=h(t),i=h(e);if(o&&!i||!o&&i)return!1;if(o)return t=w.call(t),e=w.call(e),d(t,e,n);var u,s,c=j(t),a=j(e);if(c.length!==a.length)return!1;for(c.sort(),a.sort(),s=c.length-1;s>=0;s--)if(c[s]!==a[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!d(t[u],e[u],n,r))return!1;return!0}function g(t,e,n){d(t,e,!0)&&l(t,e,n,"notDeepStrictEqual",g)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t){var e;try{t()}catch(t){e=t}return e}function b(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=m(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&l(o,n,"Missing expected exception"+r);var i="string"==typeof r,u=!t&&_.isError(o),s=!t&&o&&!n;if((u&&i&&v(o,n)||s)&&l(o,n,"Got unwanted exception"+r),t&&o&&n&&!v(o,n)||!t&&o)throw o}var _=n(64),x=Object.prototype.hasOwnProperty,w=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),S=t.exports=p,O=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,o=s(e),i=r.indexOf("\n"+o);if(i>=0){var u=r.indexOf("\n",i+1);r=r.substring(u+1)}this.stack=r}}},_.inherits(S.AssertionError,Error),S.fail=l,S.ok=p,S.equal=function(t,e,n){t!=e&&l(t,e,n,"==",S.equal)},S.notEqual=function(t,e,n){t==e&&l(t,e,n,"!=",S.notEqual)},S.deepEqual=function(t,e,n){d(t,e,!1)||l(t,e,n,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(t,e,n){d(t,e,!0)||l(t,e,n,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(t,e,n){d(t,e,!1)&&l(t,e,n,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=g,S.strictEqual=function(t,e,n){t!==e&&l(t,e,n,"===",S.strictEqual)},S.notStrictEqual=function(t,e,n){t===e&&l(t,e,n,"!==",S.notStrictEqual)},S.throws=function(t,e,n){b(!0,t,e,n)},S.doesNotThrow=function(t,e,n){b(!1,t,e,n)},S.ifError=function(t){if(t)throw t};var j=Object.keys||function(t){var e=[];for(var n in t)x.call(t,n)&&e.push(n);return e}}).call(e,n(25))},function(t,e){function n(){return(new Date).getTime()}t.exports=n},function(t,e,n){n(111),t.exports=n(3).Object.getPrototypeOf},function(t,e,n){var r=n(56),o=n(65);n(112)("getPrototypeOf",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(12),o=n(3),i=n(17);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",u)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports={default:n(115),__esModule:!0}},function(t,e,n){n(116);var r=n(3).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(12);r(r.S+r.F*!n(10),"Object",{defineProperty:n(9).f})},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){n(119),n(127),t.exports=n(48).f("iterator")},function(t,e,n){"use strict";var r=n(120)(!0);n(69)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(42),o=n(34);t.exports=function(t){return function(e,n){var i,u,s=String(o(e)),c=r(n),a=s.length;return c<0||c>=a?t?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===a||(u=s.charCodeAt(c+1))<56320||u>57343?t?s.charAt(c):i:t?s.slice(c,c+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(45),o=n(27),i=n(47),u={};n(13)(u,n(16)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(9),o=n(19),i=n(29);t.exports=n(10)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),s=u.length,c=0;s>c;)r.f(t,n=u[c++],e[n]);return t}},function(t,e,n){var r=n(15),o=n(124),i=n(125);t.exports=function(t){return function(e,n,u){var s,c=r(e),a=o(c.length),f=i(u,a);if(t&&n!=n){for(;a>f;)if((s=c[f++])!=s)return!0}else for(;a>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(42),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(42),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(4).document;t.exports=r&&r.documentElement},function(t,e,n){n(128);for(var r=n(4),o=n(13),i=n(44),u=n(16)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var a=s[c],f=r[a],l=f&&f.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,e,n){"use strict";var r=n(129),o=n(130),i=n(44),u=n(15);t.exports=n(69)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(132),__esModule:!0}},function(t,e,n){n(133),n(138),n(139),n(140),t.exports=n(3).Symbol},function(t,e,n){"use strict";var r=n(4),o=n(8),i=n(10),u=n(12),s=n(70),c=n(134).KEY,a=n(17),f=n(36),l=n(47),p=n(26),d=n(16),h=n(48),y=n(49),g=n(135),v=n(136),m=n(19),b=n(14),_=n(15),x=n(37),w=n(27),k=n(45),S=n(137),O=n(74),j=n(9),E=n(29),T=O.f,I=j.f,P=S.f,A=r.Symbol,C=r.JSON,M=C&&C.stringify,L=d("_hidden"),D=d("toPrimitive"),G={}.propertyIsEnumerable,R=f("symbol-registry"),q=f("symbols"),F=f("op-symbols"),N=Object.prototype,V="function"==typeof A,U=r.QObject,z=!U||!U.prototype||!U.prototype.findChild,B=i&&a(function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=T(N,e);r&&delete N[e],I(t,e,n),r&&t!==N&&I(N,e,r)}:I,K=function(t){var e=q[t]=k(A.prototype);return e._k=t,e},W=V&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},H=function(t,e,n){return t===N&&H(F,e,n),m(t),e=x(e,!0),m(n),o(q,e)?(n.enumerable?(o(t,L)&&t[L][e]&&(t[L][e]=!1),n=k(n,{enumerable:w(0,!1)})):(o(t,L)||I(t,L,w(1,{})),t[L][e]=!0),B(t,e,n)):I(t,e,n)},J=function(t,e){m(t);for(var n,r=g(e=_(e)),o=0,i=r.length;i>o;)H(t,n=r[o++],e[n]);return t},Y=function(t,e){return void 0===e?k(t):J(k(t),e)},$=function(t){var e=G.call(this,t=x(t,!0));return!(this===N&&o(q,t)&&!o(F,t))&&(!(e||!o(this,t)||!o(q,t)||o(this,L)&&this[L][t])||e)},Z=function(t,e){if(t=_(t),e=x(e,!0),t!==N||!o(q,e)||o(F,e)){var n=T(t,e);return!n||!o(q,e)||o(t,L)&&t[L][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=P(_(t)),r=[],i=0;n.length>i;)o(q,e=n[i++])||e==L||e==c||r.push(e);return r},X=function(t){for(var e,n=t===N,r=P(n?F:_(t)),i=[],u=0;r.length>u;)!o(q,e=r[u++])||n&&!o(N,e)||i.push(q[e]);return i};V||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===N&&e.call(F,n),o(this,L)&&o(this[L],t)&&(this[L][t]=!1),B(this,t,w(1,n))};return i&&z&&B(N,t,{configurable:!0,set:e}),K(t)},s(A.prototype,"toString",function(){return this._k}),O.f=Z,j.f=H,n(73).f=S.f=Q,n(30).f=$,n(57).f=X,i&&!n(43)&&s(N,"propertyIsEnumerable",$,!0),h.f=function(t){return K(d(t))}),u(u.G+u.W+u.F*!V,{Symbol:A});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var nt=E(d.store),rt=0;nt.length>rt;)y(nt[rt++]);u(u.S+u.F*!V,"Symbol",{for:function(t){return o(R,t+="")?R[t]:R[t]=A(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!V,"Object",{create:Y,defineProperty:H,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),C&&u(u.S+u.F*(!V||a(function(){var t=A();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(b(e)||void 0!==t)&&!W(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,M.apply(C,r)}}),A.prototype[D]||n(13)(A.prototype,D,A.prototype.valueOf),l(A,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var r=n(26)("meta"),o=n(14),i=n(8),u=n(9).f,s=0,c=Object.isExtensible||function(){return!0},a=!n(17)(function(){return c(Object.preventExtensions({}))}),f=function(t){u(t,r,{value:{i:"O"+ ++s,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[r].w},d=function(t){return a&&h.NEED&&c(t)&&!i(t,r)&&f(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,e,n){var r=n(29),o=n(57),i=n(30);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,s=n(t),c=i.f,a=0;s.length>a;)c.call(t,u=s[a++])&&e.push(u);return e}},function(t,e,n){var r=n(72);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(15),o=n(73).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?s(t):o(r(t))}},function(t,e){},function(t,e,n){n(49)("asyncIterator")},function(t,e,n){n(49)("observable")},function(t,e,n){t.exports={default:n(142),__esModule:!0}},function(t,e,n){n(143),t.exports=n(3).Object.setPrototypeOf},function(t,e,n){var r=n(12);r(r.S,"Object",{setPrototypeOf:n(144).set})},function(t,e,n){var r=n(14),o=n(19),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(66)(Function.call,n(74).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){t.exports={default:n(146),__esModule:!0}},function(t,e,n){n(147);var r=n(3).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(12);r(r.S,"Object",{create:n(45)})},function(t,e,n){(function(t,r){var o,i;!function(t,n){n(e)}(0,function(e){function u(t,e){return e={exports:{}},t(e,e.exports),e.exports}function s(t){Q.trace("[opCreateDb]: ",t);var e={};switch(t.type){case"MSG":e.msg=Z("rs_msg_db-"+t.accountGuid,v(tt));break;case"SIFT":if(!t.siftGuid)throw new Error("[opCreateDb]: dbInfo.siftGuid undefined");Q.trace("[opCreateDb]: creating SIFT db");var n=g(t.schema,!0);n=n.addStore("_user.default").addStore("_redsift").addStore("_org"),e.db=Z(t.siftGuid+"-"+t.accountGuid,n),e.msg=Z("rs_msg_db-"+t.accountGuid,v(tt));break;case"SYNC":Q.trace("[opCreateDb]: creating SYNC db"),e.db=Z("rs_sync_log-"+t.accountGuid,g(et));break;case"CLIENT":e.db=Z("rs_client_db-"+t.clientName,g(nt));break;default:throw new Error("[opCreateDb]: unsupported db type: "+t.type)}return e}function c(t,e,n){if(Q.trace("[opDel]: ",e,n),!e.bucket)return Promise.reject("[opDel]: params.bucket undefined");if(!e.keys||0===e.keys.length)return Q.trace("[opDel]: params.keys undefined"),Promise.resolve();if(-1!==X.indexOf(e.bucket)){var r=e.keys.map(function(t){return n+"/"+t});return m(t.msg,{bucket:e.bucket,keys:r})}return m(t.db,e)}function a(t,e,n){if(Q.trace("[opGet]: ",e),!e.bucket)return Promise.reject("[opGet]: params.bucket undefined");if(!e.keys)return Promise.reject("[opGet]: param.keys undefined");if(0===e.keys.length)return Promise.resolve([]);if(-1!==X.indexOf(e.bucket)){var r=e.keys.map(function(t){return n+"/"+t});return x(t.msg,{bucket:e.bucket,keys:r}).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})})}return x(t.db,e)}function f(t,e,n){return Q.trace("[opGetAll]: ",e,n),e.bucket?-1!==X.indexOf(e.bucket)?w(t.msg,{bucket:e.bucket,index:"sift.guid",range:n},!0).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):w(t.db,e,!0):Promise.reject("[opGetAll]: params.bucket undefined")}function l(t,e,n){return Q.trace("[opGetAllKeys]: ",e,n),e.bucket?-1!==X.indexOf(e.bucket)?w(t.msg,{bucket:e.bucket,index:"sift.guid",range:n},!1).then(function(t){return t.map(function(t){return t.key.split("/")[1]})}):w(t.db,e,!1):Promise.reject("[opGetAllKeys]: params.bucket undefined")}function p(t,e,n){return Q.trace("[opGetIndex]: ",e,n),e.bucket?-1!==X.indexOf(e.bucket)?w(t.msg,{bucket:e.bucket,index:"sift.guid",range:n},!0).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):e.index?w(t.db,e,!0):Promise.reject("[opGetIndex]:params.index undefined"):Promise.reject("[opGetIndex]:params.bucket undefined")}function d(t,e,n){return Q.trace("[opGetIndexKeys]: ",e,n),e.bucket?-1!==X.indexOf(e.bucket)?w(t.msg,{bucket:e.bucket,index:"sift.guid",range:n},!1).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})}):e.index?w(t.db,e,!1):Promise.reject("[opGetIndexKeys]: params.index undefined"):Promise.reject("[opGetIndexKeys]: params.bucket undefined")}function h(t,e,n){if(Q.trace("[opGetWithIndex]: ",e,n),!e.bucket)return Promise.reject("[opGetWithIndex]:params.bucket undefined");if(!e.keys)return Promise.reject("[opGetWithIndex]:params.keys undefined");if(-1!==X.indexOf(e.bucket)){var r=e.keys.map(function(t){return n+"/"+t});return _(t.msg,{bucket:e.bucket,keys:r,index:"sift.guid",range:n}).then(function(t){return t.map(function(t){return{key:t.key.split("/")[1],value:t.value}})})}return e.index?e.range?_(t.db,e):Promise.reject("[opGetWithIndex]:params.range undefined"):Promise.reject("[opGetWithIndex]:params.index undefined")}function y(t,e,n,r){Q.trace("[opPut]: ",e,n,r);var o=t.db;if(!e.bucket)return Promise.reject("[opPut]: params.bucket undefined");if(!e.kvs||0===e.kvs.length)return Q.warn("[opPut]: params.kvs undefined"),Promise.resolve();var i=e.kvs;if(n||(i=i.map(function(t){return{key:t.key,value:{value:t.value}}})),-1!==X.indexOf(e.bucket)){o=t.msg;var i=i.map(function(t){return{key:r+"/"+t.key,value:t.value}})}return b(o,{bucket:e.bucket,kvs:i})}function g(t,e){Q.trace("[_getTreoSchema]: ",t,e);var n=Z.schema().version(1);return t.forEach(function(t){e&&-1!==X.indexOf(t.name)||(n=t.keypath?n.addStore(t.name,{key:t.keypath}):n.addStore(t.name),t.indexes&&t.indexes.forEach(function(t){n=n.addIndex(t,"twoI."+t,{unique:!1})}))}),n}function v(t,e){Q.trace("[_getVersionedTreoSchema]: ",t,e);var n=Z.schema();return t.forEach(function(t,r){n=n.version(r+1),t.forEach(function(t){e&&-1!==X.indexOf(t.name)||(t.drop?(Q.trace("[_getVersionedTreoSchema]: dropping store: ",t.name),n=n.dropStore(t.name)):n=t.keypath?n.addStore(t.name,{key:t.keypath}):n.addStore(t.name),t.indexes&&t.indexes.forEach(function(e){t.drop?(Q.trace("[_getVersionedTreoSchema]: dropping store/index: "+t.name+"/"+e),n=n.dropIndex(e)):n=n.addIndex(e,e,{unique:!1})}))})}),n}function m(t,e){return Q.trace("[_batchDelete]: ",e),new Promise(function(n,r){t.transaction("readwrite",[e.bucket],function(t,o){if(t)return r(t);var i=o.objectStore(e.bucket),u=0,s=function(){if(!(u>=e.keys.length)){var t,n=e.keys[u];t=i.delete(n),t.onerror=r,t.onsuccess=s,u+=1}};o.onerror=o.onabort=r,o.oncomplete=function(){n()},s()})})}function b(t,e){return Q.trace("[_batchPut]: ",e),new Promise(function(n,r){var o=e.kvs.length;t.transaction("readwrite",[e.bucket],function(t,i){if(t)return r(t);var u=i.objectStore(e.bucket),s=0,c=function(){if(!(s>=o)){Q.trace("[_batchPut: put: ",e.kvs[s]);var t;t=u.put(e.kvs[s].value,e.kvs[s].key),t.onerror=r,t.onsuccess=c,s+=1}};i.onerror=i.onabort=r,i.oncomplete=function(){n()},c()})})}function _(t,e){return Q.trace("[_getWithIndexRange]: ",e),new Promise(function(n,r){var o=t.store(e.bucket),i=[],u=0,s=function(t){var n=e.keys.indexOf(t.primaryKey);if(-1!==n&&(Q.trace("[found key: ",t.primaryKey),i[n].value=t.value.value,u++),u===e.keys.length)return c();t.continue()},c=function(t){Q.trace("[_getWithIndexRange: result: ",i),t?r(t):n(i)};e.keys.forEach(function(t){i.push({key:t,value:void 0})}),o.cursor({index:e.index,range:e.range,iterator:s},c)})}function x(t,e){return Q.trace("[_findIn]: ",e),new Promise(function(n,r){var o=t.store(e.bucket),i=[],u=0,s=function(t){if(Q.trace("[_findIn]: iterator: ",t),t.key>a[u]){for(Q.trace("[_findIn]: cursor ahead: ",t.key,a[u]);t.key>a[u]&&u<a.length;)u+=1,Q.trace("[_findIn]: moving to next key: ",t.key,a[u]);if(u>a.length)return Q.trace("[_findIn]: exhausted keys. done."),c()}t.key===a[u]?(Q.trace("[_findIn]: found key: ",t.key,t.value),i[e.keys.indexOf(a[u])]={key:t.key,value:t.value.value},u+=1,u<a.length?t.continue(a[u]):c()):(Q.trace("[_findIn]: continuing to next key: ",a[u]),u<a.length?t.continue(a[u]):c())},c=function(t){Q.trace("[findIn]: result: ",i),t?r(t):n(i)},a=e.keys.slice();a=a.sort(Z.cmp),Q.trace("[findIn: sorted keys: ",a),e.keys.forEach(function(t){i.push({key:t,value:void 0})}),o.cursor({iterator:s},c)})}function w(t,e,n){return Q.trace("[_getAll]: ",e,n),new Promise(function(r,o){var i=[],u=[],s=t.store(e.bucket),c=function(t){var r={key:t.primaryKey};Q.trace("[_getAll]: cursor",t),n&&(r.value=t.value.value),e.index&&(r.index=t.key),i.push(r),u.push(t.primaryKey),t.continue()},a={iterator:c};e.index&&(a.index=e.index),e.range&&(a.range=e.range),s.cursor(a,function(t){t?o(t):e.index||e.range||n?(Q.trace("[_getAll]: resolving: ",i),r(i)):(Q.trace("[_getAll]: resolving: ",u),r(u))})})}function k(e){t.log("[Redsift::registerSiftView]: registered")}function S(t){return I(C,t)}function O(t){return I(ut,t)}function j(e){t.log("[Redsift::registerSiftController]: registered")}function E(t){return I(P,t)}function T(e){t.log("[Redsift::registerEmailClientController]: registered")}function I(t,e){var n=function(){t.call(this),this.init&&"function"==typeof this.init&&this.init()};return n.prototype=Object.create(t.prototype),n.constructor=n,Object.keys(e).forEach(function(t){n.prototype[t]=e[t]}),new n}var P=function(){this._proxy=self,this._registerMessageListeners()};P.prototype._registerMessageListeners=function(){var t=this;this._proxy&&(this._proxy.onmessage=function(e){var n=e.data.method;t["_"+n]&&t["_"+n](e.data.params)})},P.prototype._emailStats=function(t){this.onstats&&this.onstats(t.name,t.value)},P.prototype._getThreadRowDisplayInfo=function(t){var e=this,n={};t.tris.forEach(function(r){void 0!==r.value&&void 0!==r.value.list&&e.loadThreadListView&&(n[r.key]=e.loadThreadListView(r.value.list,t.supportedTemplates))}),this._proxy.postMessage({method:"getThreadRowDisplayInfoCallback",params:n})};var A=function(){this._observers=[]};A.prototype.subscribe=function(t,e){this._op("_sub",t,e)},A.prototype.unsubscribe=function(t,e){this._op("_unsub",t,e)},A.prototype.unsubscribeAll=function(t){this._observers[t]&&delete this._observers[t]},A.prototype.publish=function(t,e){this._op("_pub",t,e)},A.prototype._op=function(t,e,n){var r=this;Array.isArray(e)?e.forEach(function(e){r[t](e,n)}):this[t](e,n)},A.prototype._sub=function(t,e){this._observers[t]||(this._observers[t]=[]),e&&-1===this._observers[t].indexOf(e)&&this._observers[t].push(e)},A.prototype._unsub=function(t,e){if(this._observers[t]){var n=this._observers[t].indexOf(e);~n&&this._observers[t].splice(n,1)}},A.prototype._pub=function(t,e){var n=this;if(this._observers[t])for(var r=this._observers[t].length-1;r>=0;r--)n._observers[t][r](e)};var C=function(){this._resizeHandler=null,this._proxy=parent,this.controller=new A,this._registerMessageListeners()};C.prototype.publish=function(t,e){this._proxy.postMessage({method:"notifyController",params:{topic:t,value:e}},"*")},C.prototype._registerMessageListeners=function(){var e=this;window.addEventListener("message",function(n){var r=n.data.method,o=n.data.params;"notifyView"===r?e.controller.publish(o.topic,o.value):e[r]?e[r](o):t.warn("[SiftView]: method not implemented: ",r)},!1)};var M=function(t){function e(e){t.call(this),this._proxy=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.goto=function(t){this._postMessage("goto",t)},e.prototype.close=function(){this._postMessage("close")},e.prototype._postMessage=function(t,e){this._proxy.postMessage({method:"notifyClient",params:{topic:t,value:e}})},e}(A),L=function(t){function e(){t.call(this),this._storage=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(t){this._storage=t},e.prototype.get=function(t){return this._storage.get(t)},e.prototype.getIndexKeys=function(t){return this._storage.getIndexKeys(t)},e.prototype.getIndex=function(t){return this._storage.getIndex(t)},e.prototype.getWithIndex=function(t){return this._storage.getWithIndex(t)},e.prototype.getAllKeys=function(t){return this._storage.getAllKeys(t)},e.prototype.getAll=function(t){return this._storage.getAll(t)},e.prototype.getUser=function(t){return this._storage.getUser(t)},e.prototype.putUser=function(t){return this._storage.putUser(t)},e.prototype.delUser=function(t){return this._storage.delUser(t)},e}(A),D="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},G=u(function(r){!function(t,u){"use strict";o=u,void 0!==(i="function"==typeof o?o.call(e,n,e,r):o)&&(r.exports=i)}(0,function(){"use strict";function e(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function n(n){return"debug"===n&&(n="log"),typeof t!==c&&(void 0!==t[n]?e(t,n):void 0!==t.log?e(t,"log"):s)}function r(t,e){for(var n=this,r=0;r<a.length;r++){var o=a[r];n[o]=r<t?s:n.methodFactory(o,t,e)}this.log=this.debug}function o(e,n,o){return function(){typeof t!==c&&(r.call(this,n,o),this[e].apply(this,arguments))}}function i(t,e,r){return n(t)||o.apply(this,arguments)}function u(e,n,o){function u(t){var e=(a[t]||"silent").toUpperCase();if(typeof window!==c){try{return void(window.localStorage[p]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(p)+"="+e+";"}catch(t){}}}function s(){var t;if(typeof window!==c){try{t=window.localStorage[p]}catch(t){}if(typeof t===c)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(p)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}}var f,l=this,p="loglevel";e&&(p+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=o||i,l.getLevel=function(){return f},l.setLevel=function(n,o){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(f=n,!1!==o&&u(n),r.call(l,n,e),typeof t===c&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){s()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var d=s();null==d&&(d=null==n?"WARN":n),l.setLevel(d,!1)}var s=function(){},c="undefined",a=["trace","debug","info","warn","error"],f=new u,l={};f.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new u(t,f.getLevel(),f.methodFactory)),e};var p=typeof window!==c?window.log:void 0;return f.noConflict=function(){return typeof window!==c&&window.log===f&&(window.log=p),f},f})}),R=G&&"object"==typeof G&&"default"in G?G.default:G,q=u(function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n;return"[object Object]"===e.call(t)&&(null===(n=Object.getPrototypeOf(t))||n===Object.getPrototypeOf({}))}}),F=q&&"object"==typeof q&&"default"in q?q.default:q,N=u(function(t,e){"use strict";function n(t){var e=D.IDBKeyRange||D.webkitIDBKeyRange;if(t instanceof e)return t;if(void 0===t||null===t)return null;if(!(0,o.default)(t))return e.only(t);var n=Object.keys(t).sort();if(1===n.length){var r=n[0],i=t[r];switch(r){case"eq":return e.only(i);case"gt":return e.lowerBound(i,!0);case"lt":return e.upperBound(i,!0);case"gte":return e.lowerBound(i);case"lte":return e.upperBound(i);default:throw new TypeError('"'+r+'" is not valid key')}}else{var u=t[n[0]],s=t[n[1]],c=n.join("-");switch(c){case"gt-lt":return e.bound(u,s,!0,!0);case"gt-lte":return e.bound(u,s,!0,!1);case"gte-lt":return e.bound(u,s,!1,!0);case"gte-lte":return e.bound(u,s,!1,!1);default:throw new TypeError('"'+c+'" are conflicted keys')}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var r=F,o=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=e.default}),V=N&&"object"==typeof N&&"default"in N?N.default:N,U=u(function(t){function e(t,e,n,r){this.store=t,this.name=e,this.field=n,this.opts=r,this.multi=r.multi||r.multiEntry||!1,this.unique=r.unique||!1}var n=V;t.exports=e,e.prototype.get=function(t,e){function n(t){r.push(t.value),t.continue()}var r=[],o=this.unique,i={range:t,iterator:n};this.cursor(i,function(t){if(t)return e(t);o?e(null,r[0]):e(null,r)})},e.prototype.count=function(t,e){var r=this.store.name,o=this.name;this.store.db.transaction("readonly",[r],function(i,u){if(i)return e(i);var s=u.objectStore(r).index(o),c=s.count(n(t));c.onerror=e,c.onsuccess=function(t){e(null,t.target.result)}})},e.prototype.cursor=function(t,e){t.index=this.name,this.store.cursor(t,e)}}),z=U&&"object"==typeof U&&"default"in U?U.default:U,B=u(function(t){var e=Object.prototype.toString;t.exports=function(t){switch(e.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}}),K=B&&"object"==typeof B&&"default"in B?B.default:B,W=u(function(t){function e(t,e){this.db=null,this.name=t,this.indexes={},this.opts=e,this.key=e.key||e.keyPath||void 0,this.increment=e.increment||e.autoIncretement||void 0}var n=K,r=V;t.exports=e,e.prototype.index=function(t){return this.indexes[t]},e.prototype.put=function(t,e,r){var o=this.name,i=this.key;i&&("object"==n(t)?(r=e,e=t,t=null):e[i]=t),this.db.transaction("readwrite",[o],function(n,u){if(n)return r(n);var s=u.objectStore(o),c=i?s.put(e):s.put(e,t);u.onerror=u.onabort=c.onerror=r,u.oncomplete=function(){r(null,c.result)}})},e.prototype.get=function(t,e){var n=this.name;this.db.transaction("readonly",[n],function(r,o){if(r)return e(r);var i=o.objectStore(n),u=i.get(t);u.onerror=e,u.onsuccess=function(t){e(null,t.target.result)}})},e.prototype.del=function(t,e){var n=this.name;this.db.transaction("readwrite",[n],function(r,o){if(r)return e(r);var i=o.objectStore(n),u=i.delete(t);o.onerror=o.onabort=u.onerror=e,o.oncomplete=function(){e()}})},e.prototype.count=function(t){var e=this.name;this.db.transaction("readonly",[e],function(n,r){if(n)return t(n);var o=r.objectStore(e),i=o.count();i.onerror=t,i.onsuccess=function(e){t(null,e.target.result)}})},e.prototype.clear=function(t){var e=this.name;this.db.transaction("readwrite",[e],function(n,r){if(n)return t(n);var o=r.objectStore(e),i=o.clear();r.onerror=r.onabort=i.onerror=t,r.oncomplete=function(){t()}})},e.prototype.batch=function(t,e){var n=this.name,r=this.key,o=Object.keys(t);this.db.transaction("readwrite",[n],function(i,u){function s(){if(!(a>=o.length)){var n,i=o[a],u=t[i];null===u?n=c.delete(i):r?(u[r]||(u[r]=i),n=c.put(u)):n=c.put(u,i),n.onerror=e,n.onsuccess=s,a+=1}}if(i)return e(i);var c=u.objectStore(n),a=0;u.onerror=u.onabort=e,u.oncomplete=function(){e()},s()})},e.prototype.all=function(t){function e(t){n.push(t.value),t.continue()}var n=[];this.cursor({iterator:e},function(e){e?t(e):t(null,n)})},e.prototype.cursor=function(t,e){var n=this.name;this.db.transaction("readonly",[n],function(o,i){if(o)return e(o);var u=t.index?i.objectStore(n).index(t.index):i.objectStore(n),s=u.openCursor(r(t.range));s.onerror=e,s.onsuccess=function(n){var r=n.target.result;r?t.iterator(r):e()}})}}),H=W&&"object"==typeof W&&"default"in W?W.default:W,J=u(function(t){function e(){if(!(this instanceof e))return new e;this._stores={},this._current={},this._versions={}}var n=K,r=H,o=z;t.exports=e,e.prototype.version=function(t){if("number"!=n(t)||t<1||t<this.getVersion())throw new TypeError("not valid version");return this._current={version:t,store:null},this._versions[t]={stores:[],dropStores:[],indexes:[],dropIndexes:[],version:t},this},e.prototype.addStore=function(t,e){if("string"!=n(t))throw new TypeError("`name` is required");if(this._stores[t])throw new TypeError("store is already defined");var o=new r(t,e||{});return this._stores[t]=o,this._versions[this.getVersion()].stores.push(o),this._current.store=o,this},e.prototype.dropStore=function(t){if("string"!=n(t))throw new TypeError("`name` is required");var e=this._stores[t];if(!e)throw new TypeError("store is not defined");return delete this._stores[t],this._versions[this.getVersion()].dropStores.push(e),this},e.prototype.addIndex=function(t,e,r){if("string"!=n(t))throw new TypeError("`name` is required");if("string"!=n(e)&&"array"!=n(e))throw new TypeError("`field` is required");var i=this._current.store;if(i.indexes[t])throw new TypeError("index is already defined");var u=new o(i,t,e,r||{});return i.indexes[t]=u,this._versions[this.getVersion()].indexes.push(u),this},e.prototype.dropIndex=function(t){if("string"!=n(t))throw new TypeError("`name` is required");var e=this._current.store.indexes[t];if(!e)throw new TypeError("index is not defined");return delete this._current.store.indexes[t],this._versions[this.getVersion()].dropIndexes.push(e),this},e.prototype.getStore=function(t){if("string"!=n(t))throw new TypeError("`name` is required");if(!this._stores[t])throw new TypeError("store is not defined");return this._current.store=this._stores[t],this},e.prototype.getVersion=function(){return this._current.version},e.prototype.callback=function(){var t=Object.keys(this._versions).map(function(t){return this._versions[t]},this).sort(function(t,e){return t.version-e.version});return function(e){var n=e.target.result,r=e.target.transaction;t.forEach(function(t){e.oldVersion>=t.version||(t.stores.forEach(function(t){var e={};void 0!==t.key&&(e.keyPath=t.key),void 0!==t.increment&&(e.autoIncrement=t.increment),n.createObjectStore(t.name,e)}),t.dropStores.forEach(function(t){n.deleteObjectStore(t.name)}),t.indexes.forEach(function(t){r.objectStore(t.store.name).createIndex(t.name,t.field,{unique:t.unique,multiEntry:t.multi})}),t.dropIndexes.forEach(function(t){r.objectStore(t.store.name).deleteIndex(t.name)}))})}}}),Y=J&&"object"==typeof J&&"default"in J?J.default:J,$=u(function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);if("string"!=i(t))throw new TypeError("`name` required");if(!(e instanceof u))throw new TypeError("not valid schema");this.name=t,this.status="close",this.origin=null,this.stores=e._stores,this.version=e.getVersion(),this.onupgradeneeded=e.callback(),Object.keys(this.stores).forEach(function(t){this.stores[t].db=this},this)}function r(){return o().cmp.apply(o(),arguments)}function o(){return D._indexedDB||D.indexedDB||D.msIndexedDB||D.mozIndexedDB||D.webkitIndexedDB}var i=K,u=Y,s=H,c=z;e=t.exports=n,e.schema=u,e.cmp=r,e.Treo=n,e.Schema=u,e.Store=s,e.Index=c,n.prototype.use=function(t){return t(this,e),this},n.prototype.drop=function(t){var e=this.name;this.close(function(n){if(n)return t(n);var r=o().deleteDatabase(e);r.onerror=t,r.onsuccess=function(){t()}})},n.prototype.close=function(t){if("close"==this.status)return t();this.getInstance(function(e,n){if(e)return t(e);n.origin=null,n.status="close",n.close(),t()})},n.prototype.store=function(t){return this.stores[t]},n.prototype.getInstance=function(t){if("open"==this.status)return t(null,this.origin);if("opening"==this.status)return this.queue.push(t);this.status="opening",this.queue=[t];var e=this,n=o().open(this.name,this.version);n.onupgradeneeded=this.onupgradeneeded,n.onerror=n.onblocked=function(t){e.status="error",e.queue.forEach(function(e){e(t)}),delete e.queue},n.onsuccess=function(t){e.origin=t.target.result,e.status="open",e.origin.onversionchange=function(){e.close(function(){})},e.queue.forEach(function(t){t(null,e.origin)}),delete e.queue}},n.prototype.transaction=function(t,e,n){this.getInstance(function(r,o){r?n(r):n(null,o.transaction(e,t))})}}),Z=$&&"object"==typeof $&&"default"in $?$.default:$,Q=R.getLogger("RSStorage:operations");Q.setLevel("warn");var X=["_email.id","_email.tid"],tt=[[{name:"_id.list",indexes:["sift.guid"]},{name:"_tid.list",indexes:["sift.guid"]}],[{name:"_email.id",indexes:["sift.guid"]},{name:"_email.tid",indexes:["sift.guid"]},{name:"_id.list",drop:!0},{name:"_tid.list",drop:!0}]],et=[{name:"events",indexes:["value.sift.guid"]},{name:"admin"}],nt=[{name:"tour"},{name:"spm"},{name:"auth"}],rt=new WeakMap,ot=new WeakMap,it=function(t,e){if(this._logger=R.getLogger("RSStorage"),this._logger.setLevel(e||"warn"),!t.accountGuid)throw new Error("[Storage]: dbInfo.accountGuid undefined");rt.set(this,t.siftGuid),ot.set(this,s(t))};it.prototype.get=function(t){return this._logger.trace("[Storage::get]: ",t),a(ot.get(this),t,rt.get(this))},it.prototype.getAll=function(t){return this._logger.trace("[Storage::getAll]: ",t),f(ot.get(this),t,rt.get(this))},it.prototype.getAllKeys=function(t){return this._logger.trace("[Storage::getAllKeys]: ",t),l(ot.get(this),t,rt.get(this))},it.prototype.getIndex=function(t){return this._logger.trace("[Storage::getIndex]: ",t),p(ot.get(this),t,rt.get(this))},it.prototype.getIndexKeys=function(t){return this._logger.trace("[Storage::getIndexKeys]: ",t),d(ot.get(this),t,rt.get(this))},it.prototype.getWithIndex=function(t){return this._logger.trace("[Storage::getWithIndex]: ",t),h(ot.get(this),t,rt.get(this))},it.prototype.delUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::delUser]: ",t),c(ot.get(this),t,rt.get(this))},it.prototype.getUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::getUser]: ",t),a(ot.get(this),t,rt.get(this))},it.prototype.putUser=function(t){return t.bucket="_user.default",this._logger.trace("[Storage::putUser]: ",t),t.kvs&&0!==t.kvs.length?y(ot.get(this),t,!1,rt.get(this)):Promise.reject("[Storage::putUser]: params.kvs undefined")};var ut=function(){this._proxy=self,this.view=new A,this.emailclient=new M(self),this._registerMessageListeners()};ut.prototype.publish=function(t,e){this._proxy.postMessage({method:"notifyView",params:{topic:t,value:e}})},ut.prototype._registerMessageListeners=function(){var t=this;this._proxy&&(this._proxy.onmessage=function(e){var n=e.data.method;t["_"+n]&&t["_"+n](e.data.params)})},ut.prototype._init=function(t){this.storage=new L,this.storage.init(new it({type:"SIFT",siftGuid:t.siftGuid,accountGuid:t.accountGuid,schema:t.dbSchema})),this._guid=t.siftGuid,this._account=t.accountGuid,this._proxy.postMessage({method:"initCallback",result:t})},ut.prototype._terminate=function(){this._proxy&&this._proxy.close()},ut.prototype._postCallback=function(t,e){this._proxy.postMessage({method:"loadViewCallback",params:{user:{guid:this._account},sift:{guid:this._guid},type:t.type,sizeClass:t.sizeClass,result:e}})},ut.prototype._loadView=function(e){var n=this;if(!this.loadView)return void t.error("[SiftController::_loadView]: Sift controller must implement the loadView method");var r=this.loadView({sizeClass:e.sizeClass,type:e.type,params:e.data});r.data&&"function"==typeof r.data.then?(r.html&&this._postCallback(e,{html:r.html}),r.data.then(function(t){n._postCallback(e,{html:r.html,data:t})}).catch(function(e){t.error("[SiftController::loadView]: promise rejected: ",e)})):this._postCallback(e,r)},ut.prototype._storageUpdated=function(t){var e=this;this.storage.publish("*",t),t.forEach(function(t){e.storage.publish(t,[t])})},ut.prototype._notifyController=function(t){this.view.publish(t.topic,t.value)},ut.prototype._emailComposer=function(t){this.emailclient.publish(t.topic,t.value)},e.EmailClientController=P,e.SiftController=ut,e.SiftStorage=L,e.SiftView=C,e.registerSiftView=k,e.createSiftView=S,e.createSiftController=O,e.registerSiftController=j,e.createEmailClientController=E,e.registerEmailClientController=T,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(7),n(25))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(288)},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(33),i=r(o),u=n(38),s=r(u),c=n(39),a=r(c),f=n(40),l=r(f),p=n(50),d=r(p),h=n(148),y=function(e){function n(){(0,s.default)(this,n);var t=(0,l.default)(this,(n.__proto__||(0,i.default)(n)).call(this));return t._suHandler=t.onStorageUpdate.bind(t),t}return(0,d.default)(n,e),(0,a.default)(n,[{key:"loadView",value:function(e){switch(t.log("emailUpdate: loadView",e),this.storage.subscribe(["emailOutput"],this._suHandler),e.type){case"email-thread":return{html:"email-thread.html",data:{}};case"summary":return{html:"summary.html",data:this.getResults()};default:t.error("emailUpdate: unknown Sift type: ",e.type)}}},{key:"onStorageUpdate",value:function(e){var n=this;return t.log("emailUpdate: onStorageUpdate: ",e),this.getResults().then(function(t){n.publish("outputs",t)})}},{key:"getResults",value:function(){return this.storage.get({bucket:"emailOutput",keys:["email_output"]}).then(function(e){return t.log("emailUpdate: getResults returned:",e),e})}}]),n}(h.SiftController);e.default=y,(0,h.registerSiftController)(new y)}).call(e,n(7))}]);